<template>
  <section>
    <div>
      <h2>TestingGetData</h2>
      <button @click="getData">
        getData()
      </button>
    </div>

    <p v-if="isLoading">
      Loading...
    </p>
    <ul v-else class="relative w-full h-24 overflow-y-auto border bg-$background-secondary rounded">
      <li
        v-for="(post, idx) in posts"
        :key="idx"
      >
        {{ post }}
      </li>
    </ul>
  </section>
</template>


<script lang="ts">
import { defineComponent } from 'vue'
import { fakeApi } from '@/plugins/axios'

export default defineComponent({
  data: () => ({
    isLoading: false,
    posts: [],
  }),
  async mounted() {
    await this.getData()
  },
  methods: {
    async getData() {
      this.isLoading = true
      try {
        const response = await fakeApi('/posts')
        this.posts = response.data
        this.isLoading = false
      } catch (err) {
        this.isLoading = false
        console.error('üêπ fakeApi', err)
      }
    },
  },
})
</script>


